[logic]
active = move@waiting
on_death = death

[death]
on_info = %+zat_monsters_wave_defence_commander_killed =zat_monsters_wave_commander_death%

[move@waiting]
move_dest_number       = 1219831
move_look_vertex       = 1219848
move_state_when_center = guard
move_state_when_move   = walk
meet                   = meet
invulnerable           = {-zat_monsters_wave_fail -zat_monsters_wave_reward} true, false
combat_ignore_cond     = {=check_enemy_name(zat_b18_dog_noah)} true
on_info                = {=actor_neutral} %=actor_friend%, {=actor_enemy} %=actor_friend%
on_info2               = {+zat_monsters_wave_fail} nil, {+zat_monsters_wave_complete} nil
on_info3               = {+zat_monsters_wave_on_firepos} move@defence %=play_s2d_sound(characters_voice\human_01\stalker\alife\defence\actor_come_1_pda)%

[move@defence]
scheme_type            = shooter
shooter_pos            = 1219831
shooter_fire_look      = enemy
shooter_idle_look      = 1219848
shooter_clip           = -1
shooter_reload         = 1
shooter_type_wpn       = rifle
shooter_ignore_actor   = true
shooter_need_see       = true
shooter_need_dist      = 60
shooter_move_state     = assault
shooter_idle_state     = threat
shooter_fire_state     = threat_fire
shooter_home_teleport  = true
combat_ignore_cond     = {=check_enemy_name(zat_b18_dog_noah)} true
invulnerable           = {-zat_monsters_wave_appeared_1_controller} true, false
on_info                = {=actor_neutral} %=actor_friend%, {=actor_enemy} %=actor_friend%
on_info2               = {+zat_monsters_wave_fail} nil, {+zat_monsters_wave_3_controller_destroyed} nil %=play_s2d_sound(characters_voice\human_01\stalker\alife\defence\end_defence_2_pda)%
